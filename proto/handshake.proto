syntax = "proto3";

package auraphone;

option go_package = "github.com/andrewarrow/auraphone-blue/proto";

// Handshake message - minimal, fits in small MTU (~150 bytes)
// Exchanged immediately on connection to establish photo sync state
message HandshakeMessage {
  string device_id = 1;
  string first_name = 2;
  int32 protocol_version = 3;
  string rx_photo_hash = 4;  // Hash of photo we RECEIVED from remote device
  string tx_photo_hash = 5;  // Hash of OUR photo available to send
}

// Profile message - detailed info, sent after handshake
// Can be fragmented if it exceeds MTU
message ProfileMessage {
  string device_id = 1;
  string last_name = 2;
  string phone_number = 3;
  string tagline = 4;
  string insta = 5;
  string linkedin = 6;
  string youtube = 7;
  string tiktok = 8;
  string gmail = 9;
  string imessage = 10;
  string whatsapp = 11;
  string signal = 12;
  string telegram = 13;
}

// Acknowledgment of photo transfer completion
message PhotoCompletionAck {
  string device_id = 1;
  fixed32 transfer_crc = 2;  // CRC-32 of complete photo data
  bool success = 3;
}
