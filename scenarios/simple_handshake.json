{
  "name": "Simple Handshake - iOS and Android Exchange Names",
  "description": "Two devices connect and exchange handshakes with their first names via protobuf",
  "devices": [
    {
      "id": "ios-alice",
      "platform": "ios",
      "device_name": "iPhone 15 Pro",
      "profile": {
        "first_name": "Alice",
        "last_name": "Smith"
      },
      "advertising": {
        "service_uuids": ["E621E1F8-C36C-495A-93FC-0C247A3E6E5F"],
        "interval_ms": 100,
        "tx_power": 0
      }
    },
    {
      "id": "android-bob",
      "platform": "android",
      "device_name": "Pixel 8 Pro",
      "profile": {
        "first_name": "Bob",
        "last_name": "Johnson"
      },
      "advertising": {
        "service_uuids": ["E621E1F8-C36C-495A-93FC-0C247A3E6E5F"],
        "interval_ms": 100,
        "tx_power": 0
      }
    }
  ],
  "timeline": [
    {
      "time_ms": 0,
      "action": "start_advertising",
      "device": "android-bob",
      "comment": "Android starts advertising"
    },
    {
      "time_ms": 50,
      "action": "start_advertising",
      "device": "ios-alice",
      "comment": "iOS starts advertising (dual role)"
    },
    {
      "time_ms": 100,
      "action": "start_scanning",
      "device": "ios-alice",
      "comment": "iOS scans for devices"
    },
    {
      "time_ms": 200,
      "action": "discover",
      "device": "ios-alice",
      "target": "android-bob",
      "comment": "iOS discovers Android"
    },
    {
      "time_ms": 250,
      "action": "connect",
      "device": "ios-alice",
      "target": "android-bob",
      "comment": "iOS connects to Android"
    },
    {
      "time_ms": 300,
      "action": "discover_services",
      "device": "ios-alice",
      "comment": "iOS discovers GATT services"
    },
    {
      "time_ms": 350,
      "action": "send_handshake",
      "device": "ios-alice",
      "target": "android-bob",
      "comment": "iOS sends handshake with name: Alice Smith"
    },
    {
      "time_ms": 400,
      "action": "receive_handshake",
      "device": "android-bob",
      "target": "ios-alice",
      "comment": "Android receives handshake from iOS"
    },
    {
      "time_ms": 450,
      "action": "send_handshake",
      "device": "android-bob",
      "target": "ios-alice",
      "comment": "Android sends handshake response with name: Bob Johnson"
    },
    {
      "time_ms": 500,
      "action": "receive_handshake",
      "device": "ios-alice",
      "target": "android-bob",
      "comment": "iOS receives handshake from Android"
    }
  ],
  "assertions": [
    {
      "type": "connected",
      "device": "ios-alice",
      "to": "android-bob",
      "comment": "iOS should be connected to Android"
    },
    {
      "type": "handshake_received",
      "device": "ios-alice",
      "from": "android-bob",
      "comment": "iOS should have received Bob's handshake"
    },
    {
      "type": "handshake_received",
      "device": "android-bob",
      "from": "ios-alice",
      "comment": "Android should have received Alice's handshake"
    }
  ]
}
